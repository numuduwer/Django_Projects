{% load socialaccount %}
//로그인 페이지에 프로바이더에서 제공하는 템플릿 파일을 사용할 때 써야하는 템플릿언어
{% providers_media_js %}



<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>간단한 지도 표시하기</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=07sjntbgur"></script>
</head>
<body>




        <h1>제발</h1>

        <a href="/accounts/signup">회원가입 </a> <br>
        {% if user.is_authenticated %}
        <a href="/accounts/logout">로그아웃</a> <br>
        {{ user.username}} 님이 로그인중 
        
        {% else %}
        <a href="{% provider_login_url 'google' %}"> 구글 로그인</a> <br>
        로그인 해야됩니다. 
        
        
        {% endif %}
        



<div id="map" style="width:50%;height:400px;"></div>
<script>
// size 옵션이 생략되면 map DOM 요소의 HTML 렌더링 크기로 자동으로 조정됩니다.
var map = new naver.maps.Map('map', {
    center: new naver.maps.LatLng(37.5666805, 126.9784147),
    zoom: 8,
    minZoom: 1,
    mapTypeId: naver.maps.MapTypeId.HYBRID,
    zoomControl: true,
    zoomControlOptions: {
        position: naver.maps.Position.TOP_RIGHT
    },
    disableKineticPan: false
});

map.setOptions({
    mapTypeControl: true,
    scaleControl: false,
    logoControl: false
});

// 미니 맵이 들어갈 HTML 요소를 controls 객체에 추가합니다. 가장 오른쪽 아래에 위치하기 위해서 다른 옵션들을 잠시 끕니다.
map.controls[naver.maps.Position.BOTTOM_RIGHT].push($("#minimap")[0]);
map.setOptions({
    scaleControl: true,
    logoControl: true,
});

var minimap = new naver.maps.Map('minimap', { //미니 맵 지도를 생성합니다.
    bounds: map.getBounds(),
    scrollWheel: false,
    scaleControl: false,
    mapDataControl: false,
    logoControl: false
});


var semaphore = false;
naver.maps.Event.addListener(map, 'bounds_changed', function(bounds) {
    if (semaphore) return;

    minimap.fitBounds(bounds);
});
naver.maps.Event.addListener(map, 'mapTypeId_changed', function(mapTypeId) {
    var toTypes = {
        "normal": "hybrid",
        "terrain": "satellite",
        "satellite": "terrain",
        "hybrid": "normal"
    };

    minimap.setMapTypeId(toTypes[mapTypeId]);
});
naver.maps.Event.addListener(minimap, 'drag', function() {
    semaphore = true;
    map.panTo(minimap.getCenter());
    naver.maps.Event.once(map, 'idle', function() {
        semaphore = false;
    });

});
NAVER

</script>
</body>
</html>